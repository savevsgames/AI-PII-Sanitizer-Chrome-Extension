/*! For license information please see 331.js.LICENSE.txt */
"use strict";(self.webpackChunkai_pii_sanitizer=self.webpackChunkai_pii_sanitizer||[]).push([[331],{7712:(e,t,n)=>{n.d(t,{getFunctions:()=>O,httpsCallable:()=>N});var r=n(9943),i=n(1625),a=n(1711);const s="type.googleapis.com/google.protobuf.Int64Value",o="type.googleapis.com/google.protobuf.UInt64Value";function c(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function u(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>u(e));if("function"==typeof e||"object"==typeof e)return c(e,e=>u(e));throw new Error("Data cannot be encoded in JSON: "+e)}function l(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case s:case o:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>l(e)):"function"==typeof e||"object"==typeof e?c(e,e=>l(e)):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class p extends i.g{constructor(e,t,n){super(`${d}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,p.prototype)}}function f(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"==typeof t){if(!h[t])return new p("internal","internal");r=h[t],i=t}const a=e.message;"string"==typeof a&&(i=a),n=e.details,void 0!==n&&(n=l(n))}}catch(e){}return"ok"===r?null:new p(r,i,n)}class m{constructor(e,t,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||i?.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const g="us-central1",k=/^data: (.*?)(?:\n|$)/;class w{constructor(e,t,n,r,i=g,a=(...e)=>fetch(...e)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new m(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=g}catch(e){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function y(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return async function(e,t,n,r){const i={data:n=u(n)},a=await v(e,r),s=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new p("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),o=await Promise.race([A(t,i,a,e.fetchImpl,e),s.promise,e.cancelAllRequests]);if(s.cancel(),!o)throw new p("cancelled","Firebase Functions instance was deleted.");const c=f(o.status,o.json);if(c)throw c;if(!o.json)throw new p("internal","Response is not valid JSON object.");let d=o.json.data;if(void 0===d&&(d=o.json.result),void 0===d)throw new p("internal","Response is missing data field.");return{data:l(d)}}(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return async function(e,t,n,r){const i={data:n=u(n)},a=await v(e,r);let s,o,c;a["Content-Type"]="application/json",a.Accept="text/event-stream";try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:T(e)})}catch(e){if(e instanceof Error&&"AbortError"===e.name){const e=new p("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const t=f(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}const d=new Promise((e,t)=>{o=e,c=t});r?.signal?.addEventListener("abort",()=>{const e=new p("cancelled","Request was cancelled.");c(e)});const h=function(e,t,n,r){const i=(e,r)=>{const i=e.match(k);if(!i)return;const a=i[1];try{const e=JSON.parse(a);if("result"in e)return void t(l(e.result));if("message"in e)return void r.enqueue(l(e.message));if("error"in e){const t=f(0,e);return r.error(t),void n(t)}}catch(e){if(e instanceof p)return r.error(e),void n(e)}},a=new TextDecoder;return new ReadableStream({start(t){let s="";return o();async function o(){if(r?.aborted){const e=new p("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:c,done:u}=await e.read();if(u)return s.trim()&&i(s.trim(),t),void t.close();if(r?.aborted){const r=new p("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}s+=a.decode(c,{stream:!0});const l=s.split("\n");s=l.pop()||"";for(const e of l)e.trim()&&i(e.trim(),t);return o()}catch(e){const r=e instanceof p?e:f(0,null);t.error(r),n(r)}}},cancel:()=>e.cancel()})}(s.body.getReader(),o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const e=h.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:d}}(e,i,n,r||{})}(e,t,n,r),r}function T(e){return e.emulatorOrigin&&(0,i.zJ)(e.emulatorOrigin)?"include":void 0}async function A(e,t,n,r,i){let a;n["Content-Type"]="application/json";try{a=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:T(i)})}catch(e){return{status:0,json:null}}let s=null;try{s=await a.json()}catch(e){}return{status:a.status,json:s}}async function v(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}const b="@firebase/functions",E="0.13.1";function O(e=(0,r.Sx)(),t=g){const n=(0,r.j6)((0,i.Ku)(e),d).getImmediate({identifier:t}),a=(0,i.yU)("functions");return a&&function(e,t,n){!function(e,t,n){const r=(0,i.zJ)(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&((0,i.gE)(e.emulatorOrigin+"/backends"),(0,i.P1)("Functions",!0))}((0,i.Ku)(e),t,n)}(n,...a),n}function N(e,t,n){return y((0,i.Ku)(e),t,n)}(0,r.om)(new a.uA(d,(e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new w(n,r,i,a,t)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(b,E,undefined),(0,r.KO)(b,E,"esm2020")}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YmFzZS9mdW5jdGlvbnMvZGlzdC9lc20vaW5kZXguZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9pc0ZpcmViYXNlU2VydmVyQXBwLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGlzQ2xvdWRXb3Jrc3RhdGlvbiwgcGluZ1NlcnZlciwgdXBkYXRlRW11bGF0b3JCYW5uZXIsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBMT05HX1RZUEUgPSAndHlwZS5nb29nbGVhcGlzLmNvbS9nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZSc7XG5jb25zdCBVTlNJR05FRF9MT05HX1RZUEUgPSAndHlwZS5nb29nbGVhcGlzLmNvbS9nb29nbGUucHJvdG9idWYuVUludDY0VmFsdWUnO1xuZnVuY3Rpb24gbWFwVmFsdWVzKFxuLy8geyBbazogc3RyaW5nXTogdW5rbm93biB9IGlzIG5vIGxvbmdlciBhIHdpbGRjYXJkIGFzc2lnbm1lbnQgdGFyZ2V0IGFmdGVyIHR5cGVzY3JpcHQgMy41XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxubywgZikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgaWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBmKG9ba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogVGFrZXMgZGF0YSBhbmQgZW5jb2RlcyBpdCBpbiBhIEpTT04tZnJpZW5kbHkgd2F5LCBzdWNoIHRoYXQgdHlwZXMgc3VjaCBhc1xuICogRGF0ZSBhcmUgcHJlc2VydmVkLlxuICogQGludGVybmFsXG4gKiBAcGFyYW0gZGF0YSAtIERhdGEgdG8gZW5jb2RlLlxuICovXG5mdW5jdGlvbiBlbmNvZGUoZGF0YSkge1xuICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgTnVtYmVyKSB7XG4gICAgICAgIGRhdGEgPSBkYXRhLnZhbHVlT2YoKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZShkYXRhKSkge1xuICAgICAgICAvLyBBbnkgbnVtYmVyIGluIEpTIGlzIHNhZmUgdG8gcHV0IGRpcmVjdGx5IGluIEpTT04gYW5kIHBhcnNlIGFzIGEgZG91YmxlXG4gICAgICAgIC8vIHdpdGhvdXQgYW55IGxvc3Mgb2YgcHJlY2lzaW9uLlxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKGRhdGEgPT09IHRydWUgfHwgZGF0YSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IFN0cmluZ10nKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEudG9JU09TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEubWFwKHggPT4gZW5jb2RlKHgpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gbWFwVmFsdWVzKGRhdGEsIHggPT4gZW5jb2RlKHgpKTtcbiAgICB9XG4gICAgLy8gSWYgd2UgZ290IHRoaXMgZmFyLCB0aGUgZGF0YSBpcyBub3QgZW5jb2RhYmxlLlxuICAgIHRocm93IG5ldyBFcnJvcignRGF0YSBjYW5ub3QgYmUgZW5jb2RlZCBpbiBKU09OOiAnICsgZGF0YSk7XG59XG4vKipcbiAqIFRha2VzIGRhdGEgdGhhdCdzIGJlZW4gZW5jb2RlZCBpbiBhIEpTT04tZnJpZW5kbHkgZm9ybSBhbmQgcmV0dXJucyBhIGZvcm1cbiAqIHdpdGggcmljaGVyIGRhdGF0eXBlcywgc3VjaCBhcyBEYXRlcywgZXRjLlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ganNvbiAtIEpTT04gdG8gY29udmVydC5cbiAqL1xuZnVuY3Rpb24gZGVjb2RlKGpzb24pIHtcbiAgICBpZiAoanNvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICBpZiAoanNvblsnQHR5cGUnXSkge1xuICAgICAgICBzd2l0Y2ggKGpzb25bJ0B0eXBlJ10pIHtcbiAgICAgICAgICAgIGNhc2UgTE9OR19UWVBFOlxuICAgICAgICAgICAgLy8gRmFsbCB0aHJvdWdoIGFuZCBoYW5kbGUgdGhpcyB0aGUgc2FtZSBhcyB1bnNpZ25lZC5cbiAgICAgICAgICAgIGNhc2UgVU5TSUdORURfTE9OR19UWVBFOiB7XG4gICAgICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHksIHRoaXMgY291bGQgd29yayByZXR1cm4gYSB2YWxpZCBudW1iZXIgZm9yIG1hbGZvcm1lZFxuICAgICAgICAgICAgICAgIC8vIGRhdGEgaWYgdGhlcmUgd2FzIGEgbnVtYmVyIGZvbGxvd2VkIGJ5IGdhcmJhZ2UuIEJ1dCBpdCdzIGp1c3Qgbm90XG4gICAgICAgICAgICAgICAgLy8gd29ydGggYWxsIHRoZSBleHRyYSBjb2RlIHRvIGRldGVjdCB0aGF0IGNhc2UuXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoanNvblsndmFsdWUnXSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgY2Fubm90IGJlIGRlY29kZWQgZnJvbSBKU09OOiAnICsganNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgY2Fubm90IGJlIGRlY29kZWQgZnJvbSBKU09OOiAnICsganNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbikpIHtcbiAgICAgICAgcmV0dXJuIGpzb24ubWFwKHggPT4gZGVjb2RlKHgpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBqc29uID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBqc29uID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gbWFwVmFsdWVzKGpzb24sIHggPT4gZGVjb2RlKHgpKTtcbiAgICB9XG4gICAgLy8gQW55dGhpbmcgZWxzZSBpcyBzYWZlIHRvIHJldHVybi5cbiAgICByZXR1cm4ganNvbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgRnVuY3Rpb25zLlxuICovXG5jb25zdCBGVU5DVElPTlNfVFlQRSA9ICdmdW5jdGlvbnMnO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTdGFuZGFyZCBlcnJvciBjb2RlcyBmb3IgZGlmZmVyZW50IHdheXMgYSByZXF1ZXN0IGNhbiBmYWlsLCBhcyBkZWZpbmVkIGJ5OlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ29vZ2xlYXBpcy9ibG9iL21hc3Rlci9nb29nbGUvcnBjL2NvZGUucHJvdG9cbiAqXG4gKiBUaGlzIG1hcCBpcyB1c2VkIHByaW1hcmlseSB0byBjb252ZXJ0IGZyb20gYSBiYWNrZW5kIGVycm9yIGNvZGUgc3RyaW5nIHRvXG4gKiBhIGNsaWVudCBTREsgZXJyb3IgY29kZSBzdHJpbmcsIGFuZCBtYWtlIHN1cmUgaXQncyBpbiB0aGUgc3VwcG9ydGVkIHNldC5cbiAqL1xuY29uc3QgZXJyb3JDb2RlTWFwID0ge1xuICAgIE9LOiAnb2snLFxuICAgIENBTkNFTExFRDogJ2NhbmNlbGxlZCcsXG4gICAgVU5LTk9XTjogJ3Vua25vd24nLFxuICAgIElOVkFMSURfQVJHVU1FTlQ6ICdpbnZhbGlkLWFyZ3VtZW50JyxcbiAgICBERUFETElORV9FWENFRURFRDogJ2RlYWRsaW5lLWV4Y2VlZGVkJyxcbiAgICBOT1RfRk9VTkQ6ICdub3QtZm91bmQnLFxuICAgIEFMUkVBRFlfRVhJU1RTOiAnYWxyZWFkeS1leGlzdHMnLFxuICAgIFBFUk1JU1NJT05fREVOSUVEOiAncGVybWlzc2lvbi1kZW5pZWQnLFxuICAgIFVOQVVUSEVOVElDQVRFRDogJ3VuYXV0aGVudGljYXRlZCcsXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiAncmVzb3VyY2UtZXhoYXVzdGVkJyxcbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiAnZmFpbGVkLXByZWNvbmRpdGlvbicsXG4gICAgQUJPUlRFRDogJ2Fib3J0ZWQnLFxuICAgIE9VVF9PRl9SQU5HRTogJ291dC1vZi1yYW5nZScsXG4gICAgVU5JTVBMRU1FTlRFRDogJ3VuaW1wbGVtZW50ZWQnLFxuICAgIElOVEVSTkFMOiAnaW50ZXJuYWwnLFxuICAgIFVOQVZBSUxBQkxFOiAndW5hdmFpbGFibGUnLFxuICAgIERBVEFfTE9TUzogJ2RhdGEtbG9zcydcbn07XG4vKipcbiAqIEFuIGVycm9yIHJldHVybmVkIGJ5IHRoZSBGaXJlYmFzZSBGdW5jdGlvbnMgY2xpZW50IFNESy5cbiAqXG4gKiBTZWUge0BsaW5rIEZ1bmN0aW9uc0Vycm9yQ29kZX0gZm9yIGZ1bGwgZG9jdW1lbnRhdGlvbiBvZiBjb2Rlcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEZ1bmN0aW9uc0Vycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYEZ1bmN0aW9uc0Vycm9yYCBjbGFzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBIHN0YW5kYXJkIGVycm9yIGNvZGUgdGhhdCB3aWxsIGJlIHJldHVybmVkIHRvIHRoZSBjbGllbnQuIFRoaXMgYWxzb1xuICAgICAqIGRldGVybWluZXMgdGhlIEhUVFAgc3RhdHVzIGNvZGUgb2YgdGhlIHJlc3BvbnNlLCBhcyBkZWZpbmVkIGluIGNvZGUucHJvdG8uXG4gICAgICovXG4gICAgY29kZSwgbWVzc2FnZSwgXG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBkZXRhaWxzIHRvIGJlIGNvbnZlcnRlZCB0byBKU09OIGFuZCBpbmNsdWRlZCBpbiB0aGUgZXJyb3IgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZGV0YWlscykge1xuICAgICAgICBzdXBlcihgJHtGVU5DVElPTlNfVFlQRX0vJHtjb2RlfWAsIG1lc3NhZ2UgfHwgJycpO1xuICAgICAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgICAgICAvLyBTaW5jZSB0aGUgRmlyZWJhc2VFcnJvciBjb25zdHJ1Y3RvciBzZXRzIHRoZSBwcm90b3R5cGUgb2YgYHRoaXNgIHRvIEZpcmViYXNlRXJyb3IucHJvdG90eXBlLFxuICAgICAgICAvLyB3ZSBhbHNvIGhhdmUgdG8gZG8gaXQgaW4gYWxsIHN1YmNsYXNzZXMgdG8gYWxsb3cgZm9yIGNvcnJlY3QgYGluc3RhbmNlb2ZgIGNoZWNrcy5cbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZ1bmN0aW9uc0Vycm9yLnByb3RvdHlwZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUYWtlcyBhbiBIVFRQIHN0YXR1cyBjb2RlIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIEVycm9yQ29kZS5cbiAqIFRoaXMgaXMgdGhlIHN0YW5kYXJkIEhUVFAgc3RhdHVzIGNvZGUgLT4gZXJyb3IgbWFwcGluZyBkZWZpbmVkIGluOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ29vZ2xlYXBpcy9ibG9iL21hc3Rlci9nb29nbGUvcnBjL2NvZGUucHJvdG9cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIEFuIEhUVFAgc3RhdHVzIGNvZGUuXG4gKiBAcmV0dXJuIFRoZSBjb3JyZXNwb25kaW5nIEVycm9yQ29kZSwgb3IgRXJyb3JDb2RlLlVOS05PV04gaWYgbm9uZS5cbiAqL1xuZnVuY3Rpb24gY29kZUZvckhUVFBTdGF0dXMoc3RhdHVzKSB7XG4gICAgLy8gTWFrZSBzdXJlIGFueSBzdWNjZXNzZnVsIHN0YXR1cyBpcyBPSy5cbiAgICBpZiAoc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDApIHtcbiAgICAgICAgcmV0dXJuICdvayc7XG4gICAgfVxuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgc2VydmVyIHJldHVybnMgNTAwLlxuICAgICAgICAgICAgcmV0dXJuICdpbnRlcm5hbCc7XG4gICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgICAgcmV0dXJuICdpbnZhbGlkLWFyZ3VtZW50JztcbiAgICAgICAgY2FzZSA0MDE6XG4gICAgICAgICAgICByZXR1cm4gJ3VuYXV0aGVudGljYXRlZCc7XG4gICAgICAgIGNhc2UgNDAzOlxuICAgICAgICAgICAgcmV0dXJuICdwZXJtaXNzaW9uLWRlbmllZCc7XG4gICAgICAgIGNhc2UgNDA0OlxuICAgICAgICAgICAgcmV0dXJuICdub3QtZm91bmQnO1xuICAgICAgICBjYXNlIDQwOTpcbiAgICAgICAgICAgIHJldHVybiAnYWJvcnRlZCc7XG4gICAgICAgIGNhc2UgNDI5OlxuICAgICAgICAgICAgcmV0dXJuICdyZXNvdXJjZS1leGhhdXN0ZWQnO1xuICAgICAgICBjYXNlIDQ5OTpcbiAgICAgICAgICAgIHJldHVybiAnY2FuY2VsbGVkJztcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgICByZXR1cm4gJ2ludGVybmFsJztcbiAgICAgICAgY2FzZSA1MDE6XG4gICAgICAgICAgICByZXR1cm4gJ3VuaW1wbGVtZW50ZWQnO1xuICAgICAgICBjYXNlIDUwMzpcbiAgICAgICAgICAgIHJldHVybiAndW5hdmFpbGFibGUnO1xuICAgICAgICBjYXNlIDUwNDpcbiAgICAgICAgICAgIHJldHVybiAnZGVhZGxpbmUtZXhjZWVkZWQnO1xuICAgIH1cbiAgICByZXR1cm4gJ3Vua25vd24nO1xufVxuLyoqXG4gKiBUYWtlcyBhbiBIVFRQIHJlc3BvbnNlIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIEVycm9yLCBpZiBhbnkuXG4gKi9cbmZ1bmN0aW9uIF9lcnJvckZvclJlc3BvbnNlKHN0YXR1cywgYm9keUpTT04pIHtcbiAgICBsZXQgY29kZSA9IGNvZGVGb3JIVFRQU3RhdHVzKHN0YXR1cyk7XG4gICAgLy8gU3RhcnQgd2l0aCByZWFzb25hYmxlIGRlZmF1bHRzIGZyb20gdGhlIHN0YXR1cyBjb2RlLlxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGNvZGU7XG4gICAgbGV0IGRldGFpbHMgPSB1bmRlZmluZWQ7XG4gICAgLy8gVGhlbiBsb29rIHRocm91Z2ggdGhlIGJvZHkgZm9yIGV4cGxpY2l0IGRldGFpbHMuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXJyb3JKU09OID0gYm9keUpTT04gJiYgYm9keUpTT04uZXJyb3I7XG4gICAgICAgIGlmIChlcnJvckpTT04pIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9ySlNPTi5zdGF0dXM7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXR1cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yQ29kZU1hcFtzdGF0dXNdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXkgbXVzdCd2ZSBpbmNsdWRlZCBhbiB1bmtub3duIGVycm9yIGNvZGUgaW4gdGhlIGJvZHkuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25zRXJyb3IoJ2ludGVybmFsJywgJ2ludGVybmFsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvZGUgPSBlcnJvckNvZGVNYXBbc3RhdHVzXTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGtsaW10KTogQWRkIGJldHRlciBkZWZhdWx0IGRlc2NyaXB0aW9ucyBmb3IgZXJyb3IgZW51bXMuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZGVzY3JpcHRpb24gbmVlZHMgdG8gYmUgdXBkYXRlZCBmb3IgdGhlIG5ldyBjb2RlLlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gc3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9ySlNPTi5tZXNzYWdlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRldGFpbHMgPSBlcnJvckpTT04uZGV0YWlscztcbiAgICAgICAgICAgIGlmIChkZXRhaWxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0gZGVjb2RlKGRldGFpbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElmIHdlIGNvdWxkbid0IHBhcnNlIGV4cGxpY2l0IGVycm9yIGRhdGEsIHRoYXQncyBmaW5lLlxuICAgIH1cbiAgICBpZiAoY29kZSA9PT0gJ29rJykge1xuICAgICAgICAvLyBUZWNobmljYWxseSwgdGhlcmUncyBhbiBlZGdlIGNhc2Ugd2hlcmUgYSBkZXZlbG9wZXIgY291bGQgZXhwbGljaXRseVxuICAgICAgICAvLyByZXR1cm4gYW4gZXJyb3IgY29kZSBvZiBPSywgYW5kIHdlIHdpbGwgdHJlYXQgaXQgYXMgc3VjY2VzcywgYnV0IHRoYXRcbiAgICAgICAgLy8gc2VlbXMgcmVhc29uYWJsZS5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRnVuY3Rpb25zRXJyb3IoY29kZSwgZGVzY3JpcHRpb24sIGRldGFpbHMpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgY2xhc3MgdG8gZ2V0IG1ldGFkYXRhIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIHdpdGggYSBmdW5jdGlvbiBjYWxsLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIENvbnRleHRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoYXBwLCBhdXRoUHJvdmlkZXIsIG1lc3NhZ2luZ1Byb3ZpZGVyLCBhcHBDaGVja1Byb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmF1dGggPSBudWxsO1xuICAgICAgICB0aGlzLm1lc3NhZ2luZyA9IG51bGw7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgPSBudWxsO1xuICAgICAgICB0aGlzLnNlcnZlckFwcEFwcENoZWNrVG9rZW4gPSBudWxsO1xuICAgICAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAoYXBwKSAmJiBhcHAuc2V0dGluZ3MuYXBwQ2hlY2tUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJBcHBBcHBDaGVja1Rva2VuID0gYXBwLnNldHRpbmdzLmFwcENoZWNrVG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aFByb3ZpZGVyLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLm1lc3NhZ2luZyA9IG1lc3NhZ2luZ1Byb3ZpZGVyLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgIGF1dGhQcm92aWRlci5nZXQoKS50aGVuKGF1dGggPT4gKHRoaXMuYXV0aCA9IGF1dGgpLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLyogZ2V0KCkgbmV2ZXIgcmVqZWN0cyAqL1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2luZykge1xuICAgICAgICAgICAgbWVzc2FnaW5nUHJvdmlkZXIuZ2V0KCkudGhlbihtZXNzYWdpbmcgPT4gKHRoaXMubWVzc2FnaW5nID0gbWVzc2FnaW5nKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8qIGdldCgpIG5ldmVyIHJlamVjdHMgKi9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgYXBwQ2hlY2tQcm92aWRlcj8uZ2V0KCkudGhlbihhcHBDaGVjayA9PiAodGhpcy5hcHBDaGVjayA9IGFwcENoZWNrKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8qIGdldCgpIG5ldmVyIHJlamVjdHMgKi9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldEF1dGhUb2tlbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5hdXRoLmdldFRva2VuKCk7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW4/LmFjY2Vzc1Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGFueSBlcnJvciB3aGVuIHRyeWluZyB0byBnZXQgdGhlIGF1dGggdG9rZW4sIGxlYXZlIGl0IG9mZi5cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0TWVzc2FnaW5nVG9rZW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5tZXNzYWdpbmcgfHxcbiAgICAgICAgICAgICEoJ05vdGlmaWNhdGlvbicgaW4gc2VsZikgfHxcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1lc3NhZ2luZy5nZXRUb2tlbigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBXZSBkb24ndCB3YXJuIG9uIHRoaXMsIGJlY2F1c2UgaXQgdXN1YWxseSBtZWFucyBtZXNzYWdpbmcgaXNuJ3Qgc2V0IHVwLlxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmV0cmlldmUgaW5zdGFuY2UgaWQgdG9rZW4uJywgZSk7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGFueSBlcnJvciB3aGVuIHRyeWluZyB0byBnZXQgdGhlIHRva2VuLCBsZWF2ZSBpdCBvZmYuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldEFwcENoZWNrVG9rZW4obGltaXRlZFVzZUFwcENoZWNrVG9rZW5zKSB7XG4gICAgICAgIGlmICh0aGlzLnNlcnZlckFwcEFwcENoZWNrVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcnZlckFwcEFwcENoZWNrVG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGxpbWl0ZWRVc2VBcHBDaGVja1Rva2Vuc1xuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5hcHBDaGVjay5nZXRMaW1pdGVkVXNlVG9rZW4oKVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5hcHBDaGVjay5nZXRUb2tlbigpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBzZW5kIHRoZSBBcHAgQ2hlY2sgaGVhZGVyIHRvIHRoZSBmdW5jdGlvbnMgZW5kcG9pbnQgaWZcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSB3YXMgYW4gZXJyb3IgZnJvbSB0aGUgQXBwIENoZWNrIGV4Y2hhbmdlIGVuZHBvaW50LiBUaGUgQXBwXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgU0RLIHdpbGwgYWxyZWFkeSBoYXZlIGxvZ2dlZCB0aGUgZXJyb3IgdG8gY29uc29sZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbnRleHQobGltaXRlZFVzZUFwcENoZWNrVG9rZW5zKSB7XG4gICAgICAgIGNvbnN0IGF1dGhUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2luZ1Rva2VuID0gYXdhaXQgdGhpcy5nZXRNZXNzYWdpbmdUb2tlbigpO1xuICAgICAgICBjb25zdCBhcHBDaGVja1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBcHBDaGVja1Rva2VuKGxpbWl0ZWRVc2VBcHBDaGVja1Rva2Vucyk7XG4gICAgICAgIHJldHVybiB7IGF1dGhUb2tlbiwgbWVzc2FnaW5nVG9rZW4sIGFwcENoZWNrVG9rZW4gfTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBERUZBVUxUX1JFR0lPTiA9ICd1cy1jZW50cmFsMSc7XG5jb25zdCByZXNwb25zZUxpbmVSRSA9IC9eZGF0YTogKC4qPykoPzpcXG58JCkvO1xuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVqZWN0ZWQgYWZ0ZXIgdGhlIGdpdmVuIGR1cmF0aW9uLlxuICogVGhlIGVycm9yIHdpbGwgYmUgb2YgdHlwZSBGdW5jdGlvbnNFcnJvci5cbiAqXG4gKiBAcGFyYW0gbWlsbGlzIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgcmVqZWN0aW5nLlxuICovXG5mdW5jdGlvbiBmYWlsQWZ0ZXIobWlsbGlzKSB7XG4gICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXG4gICAgLy8gZG9uJ3QgY2FyZSBhYm91dCB0aGUgdmFsdWUgaGVyZVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbGV0IHRpbWVyID0gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9taXNlOiBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRnVuY3Rpb25zRXJyb3IoJ2RlYWRsaW5lLWV4Y2VlZGVkJywgJ2RlYWRsaW5lLWV4Y2VlZGVkJykpO1xuICAgICAgICAgICAgfSwgbWlsbGlzKTtcbiAgICAgICAgfSksXG4gICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRpbWVyKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIFRoZSBtYWluIGNsYXNzIGZvciB0aGUgRmlyZWJhc2UgRnVuY3Rpb25zIFNESy5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBGdW5jdGlvbnNTZXJ2aWNlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEZ1bmN0aW9ucyBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gYXBwLlxuICAgICAqIEBwYXJhbSBhcHAgLSBUaGUgRmlyZWJhc2VBcHAgdG8gdXNlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgYXV0aFByb3ZpZGVyLCBtZXNzYWdpbmdQcm92aWRlciwgYXBwQ2hlY2tQcm92aWRlciwgcmVnaW9uT3JDdXN0b21Eb21haW4gPSBERUZBVUxUX1JFR0lPTiwgZmV0Y2hJbXBsID0gKC4uLmFyZ3MpID0+IGZldGNoKC4uLmFyZ3MpKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmZldGNoSW1wbCA9IGZldGNoSW1wbDtcbiAgICAgICAgdGhpcy5lbXVsYXRvck9yaWdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMuY29udGV4dFByb3ZpZGVyID0gbmV3IENvbnRleHRQcm92aWRlcihhcHAsIGF1dGhQcm92aWRlciwgbWVzc2FnaW5nUHJvdmlkZXIsIGFwcENoZWNrUHJvdmlkZXIpO1xuICAgICAgICAvLyBDYW5jZWxzIGFsbCBvbmdvaW5nIHJlcXVlc3RzIHdoZW4gcmVzb2x2ZWQuXG4gICAgICAgIHRoaXMuY2FuY2VsQWxsUmVxdWVzdHMgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlU2VydmljZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVzb2x2ZSB0aGUgcmVnaW9uIG9yIGN1c3RvbSBkb21haW4gb3ZlcmxvYWQgYnkgYXR0ZW1wdGluZyB0byBwYXJzZSBpdC5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVnaW9uT3JDdXN0b21Eb21haW4pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21Eb21haW4gPVxuICAgICAgICAgICAgICAgIHVybC5vcmlnaW4gKyAodXJsLnBhdGhuYW1lID09PSAnLycgPyAnJyA6IHVybC5wYXRobmFtZSk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lvbiA9IERFRkFVTFRfUkVHSU9OO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbURvbWFpbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlZ2lvbiA9IHJlZ2lvbk9yQ3VzdG9tRG9tYWluO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGV0ZVNlcnZpY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVVJMIGZvciBhIGNhbGxhYmxlIHdpdGggdGhlIGdpdmVuIG5hbWUuXG4gICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY2FsbGFibGUuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3VybChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RJZCA9IHRoaXMuYXBwLm9wdGlvbnMucHJvamVjdElkO1xuICAgICAgICBpZiAodGhpcy5lbXVsYXRvck9yaWdpbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luID0gdGhpcy5lbXVsYXRvck9yaWdpbjtcbiAgICAgICAgICAgIHJldHVybiBgJHtvcmlnaW59LyR7cHJvamVjdElkfS8ke3RoaXMucmVnaW9ufS8ke25hbWV9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jdXN0b21Eb21haW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmN1c3RvbURvbWFpbn0vJHtuYW1lfWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7dGhpcy5yZWdpb259LSR7cHJvamVjdElkfS5jbG91ZGZ1bmN0aW9ucy5uZXQvJHtuYW1lfWA7XG4gICAgfVxufVxuLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGdW5jdGlvbnMgZW11bGF0b3IuXG4gKlxuICogTm90ZTogdGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueSBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBob3N0IFRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KVxuICogQHBhcmFtIHBvcnQgVGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA1MDAxKVxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBjb25uZWN0RnVuY3Rpb25zRW11bGF0b3IkMShmdW5jdGlvbnNJbnN0YW5jZSwgaG9zdCwgcG9ydCkge1xuICAgIGNvbnN0IHVzZVNzbCA9IGlzQ2xvdWRXb3Jrc3RhdGlvbihob3N0KTtcbiAgICBmdW5jdGlvbnNJbnN0YW5jZS5lbXVsYXRvck9yaWdpbiA9IGBodHRwJHt1c2VTc2wgPyAncycgOiAnJ306Ly8ke2hvc3R9OiR7cG9ydH1gO1xuICAgIC8vIFdvcmthcm91bmQgdG8gZ2V0IGNvb2tpZXMgaW4gRmlyZWJhc2UgU3R1ZGlvXG4gICAgaWYgKHVzZVNzbCkge1xuICAgICAgICB2b2lkIHBpbmdTZXJ2ZXIoZnVuY3Rpb25zSW5zdGFuY2UuZW11bGF0b3JPcmlnaW4gKyAnL2JhY2tlbmRzJyk7XG4gICAgICAgIHVwZGF0ZUVtdWxhdG9yQmFubmVyKCdGdW5jdGlvbnMnLCB0cnVlKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGNhbGxhYmxlIGh0dHBzIHRyaWdnZXIgd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRyaWdnZXIuXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGh0dHBzQ2FsbGFibGUkMShmdW5jdGlvbnNJbnN0YW5jZSwgbmFtZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGNhbGxhYmxlID0gKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGNhbGwoZnVuY3Rpb25zSW5zdGFuY2UsIG5hbWUsIGRhdGEsIG9wdGlvbnMgfHwge30pO1xuICAgIH07XG4gICAgY2FsbGFibGUuc3RyZWFtID0gKGRhdGEsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0cmVhbShmdW5jdGlvbnNJbnN0YW5jZSwgbmFtZSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICByZXR1cm4gY2FsbGFibGU7XG59XG4vKipcbiAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGNhbGxhYmxlIGh0dHBzIHRyaWdnZXIgd2l0aCB0aGUgZ2l2ZW4gdXJsLlxuICogQHBhcmFtIHVybCAtIFRoZSB1cmwgb2YgdGhlIHRyaWdnZXIuXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGh0dHBzQ2FsbGFibGVGcm9tVVJMJDEoZnVuY3Rpb25zSW5zdGFuY2UsIHVybCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGNhbGxhYmxlID0gKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGNhbGxBdFVSTChmdW5jdGlvbnNJbnN0YW5jZSwgdXJsLCBkYXRhLCBvcHRpb25zIHx8IHt9KTtcbiAgICB9O1xuICAgIGNhbGxhYmxlLnN0cmVhbSA9IChkYXRhLCBvcHRpb25zKSA9PiB7XG4gICAgICAgIHJldHVybiBzdHJlYW1BdFVSTChmdW5jdGlvbnNJbnN0YW5jZSwgdXJsLCBkYXRhLCBvcHRpb25zIHx8IHt9KTtcbiAgICB9O1xuICAgIHJldHVybiBjYWxsYWJsZTtcbn1cbmZ1bmN0aW9uIGdldENyZWRlbnRpYWxzKGZ1bmN0aW9uc0luc3RhbmNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uc0luc3RhbmNlLmVtdWxhdG9yT3JpZ2luICYmXG4gICAgICAgIGlzQ2xvdWRXb3Jrc3RhdGlvbihmdW5jdGlvbnNJbnN0YW5jZS5lbXVsYXRvck9yaWdpbilcbiAgICAgICAgPyAnaW5jbHVkZSdcbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIERvZXMgYW4gSFRUUCBQT1NUIGFuZCByZXR1cm5zIHRoZSBjb21wbGV0ZWQgcmVzcG9uc2UuXG4gKiBAcGFyYW0gdXJsIFRoZSB1cmwgdG8gcG9zdCB0by5cbiAqIEBwYXJhbSBib2R5IFRoZSBKU09OIGJvZHkgb2YgdGhlIHBvc3QuXG4gKiBAcGFyYW0gaGVhZGVycyBUaGUgSFRUUCBoZWFkZXJzIHRvIGluY2x1ZGUgaW4gdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0gZnVuY3Rpb25zSW5zdGFuY2UgZnVuY3Rpb25zIGluc3RhbmNlIHRoYXQgaXMgY2FsbGluZyBwb3N0SlNPTlxuICogQHJldHVybiBBIFByb21pc2UgdGhhdCB3aWxsIHN1Y2NlZWQgd2hlbiB0aGUgcmVxdWVzdCBmaW5pc2hlcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcG9zdEpTT04odXJsLCBib2R5LCBoZWFkZXJzLCBmZXRjaEltcGwsIGZ1bmN0aW9uc0luc3RhbmNlKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hJbXBsKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogZ2V0Q3JlZGVudGlhbHMoZnVuY3Rpb25zSW5zdGFuY2UpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGFuIHVuaGFuZGxlZCBlcnJvciBvbiB0aGUgYmFja2VuZCwgb3IgaXQgY291bGQgYmUgYVxuICAgICAgICAvLyBuZXR3b3JrIGVycm9yLiBUaGVyZSdzIG5vIHdheSB0byBrbm93LCBzaW5jZSBhbiB1bmhhbmRsZWQgZXJyb3Igb24gdGhlXG4gICAgICAgIC8vIGJhY2tlbmQgd2lsbCBmYWlsIHRvIHNldCB0aGUgcHJvcGVyIENPUlMgaGVhZGVyLCBhbmQgdGh1cyB3aWxsIGJlXG4gICAgICAgIC8vIHRyZWF0ZWQgYXMgYSBuZXR3b3JrIGVycm9yIGJ5IGZldGNoLlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAganNvbjogbnVsbFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQganNvbiA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgICAganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgd2UgZmFpbCB0byBwYXJzZSBKU09OLCBpdCB3aWxsIGZhaWwgdGhlIHNhbWUgYXMgYW4gZW1wdHkgYm9keS5cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIGpzb25cbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGF1dGhvcml6YXRpb24gaGVhZGVycyBmb3IgRmlyZWJhc2UgRnVuY3Rpb25zIHJlcXVlc3RzLlxuICogQHBhcmFtIGZ1bmN0aW9uc0luc3RhbmNlIFRoZSBGaXJlYmFzZSBGdW5jdGlvbnMgc2VydmljZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBjYWxsYWJsZSBmdW5jdGlvbiwgaW5jbHVkaW5nIEFwcENoZWNrIHRva2VuIHNldHRpbmdzLlxuICogQHJldHVybiBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhIGhlYWRlcnMgbWFwIHRvIGluY2x1ZGUgaW4gb3V0Z29pbmcgZmV0Y2ggcmVxdWVzdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gbWFrZUF1dGhIZWFkZXJzKGZ1bmN0aW9uc0luc3RhbmNlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBmdW5jdGlvbnNJbnN0YW5jZS5jb250ZXh0UHJvdmlkZXIuZ2V0Q29udGV4dChvcHRpb25zLmxpbWl0ZWRVc2VBcHBDaGVja1Rva2Vucyk7XG4gICAgaWYgKGNvbnRleHQuYXV0aFRva2VuKSB7XG4gICAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIGNvbnRleHQuYXV0aFRva2VuO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5tZXNzYWdpbmdUb2tlbikge1xuICAgICAgICBoZWFkZXJzWydGaXJlYmFzZS1JbnN0YW5jZS1JRC1Ub2tlbiddID0gY29udGV4dC5tZXNzYWdpbmdUb2tlbjtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQuYXBwQ2hlY2tUb2tlbiAhPT0gbnVsbCkge1xuICAgICAgICBoZWFkZXJzWydYLUZpcmViYXNlLUFwcENoZWNrJ10gPSBjb250ZXh0LmFwcENoZWNrVG9rZW47XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXJzO1xufVxuLyoqXG4gKiBDYWxscyBhIGNhbGxhYmxlIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5IGFuZCByZXR1cm5zIHRoZSByZXN1bHQuXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY2FsbGFibGUgdHJpZ2dlci5cbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgYXMgcGFyYW1zIHRvIHRoZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2FsbChmdW5jdGlvbnNJbnN0YW5jZSwgbmFtZSwgZGF0YSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHVybCA9IGZ1bmN0aW9uc0luc3RhbmNlLl91cmwobmFtZSk7XG4gICAgcmV0dXJuIGNhbGxBdFVSTChmdW5jdGlvbnNJbnN0YW5jZSwgdXJsLCBkYXRhLCBvcHRpb25zKTtcbn1cbi8qKlxuICogQ2FsbHMgYSBjYWxsYWJsZSBmdW5jdGlvbiBhc3luY2hyb25vdXNseSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxuICogQHBhcmFtIHVybCBUaGUgdXJsIG9mIHRoZSBjYWxsYWJsZSB0cmlnZ2VyLlxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gcGFzcyBhcyBwYXJhbXMgdG8gdGhlIGZ1bmN0aW9uLlxuICovXG5hc3luYyBmdW5jdGlvbiBjYWxsQXRVUkwoZnVuY3Rpb25zSW5zdGFuY2UsIHVybCwgZGF0YSwgb3B0aW9ucykge1xuICAgIC8vIEVuY29kZSBhbnkgc3BlY2lhbCB0eXBlcywgc3VjaCBhcyBkYXRlcywgaW4gdGhlIGlucHV0IGRhdGEuXG4gICAgZGF0YSA9IGVuY29kZShkYXRhKTtcbiAgICBjb25zdCBib2R5ID0geyBkYXRhIH07XG4gICAgLy8gQWRkIGEgaGVhZGVyIGZvciB0aGUgYXV0aFRva2VuLlxuICAgIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBtYWtlQXV0aEhlYWRlcnMoZnVuY3Rpb25zSW5zdGFuY2UsIG9wdGlvbnMpO1xuICAgIC8vIERlZmF1bHQgdGltZW91dCB0byA3MHMsIGJ1dCBsZXQgdGhlIG9wdGlvbnMgb3ZlcnJpZGUgaXQuXG4gICAgY29uc3QgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCA3MDAwMDtcbiAgICBjb25zdCBmYWlsQWZ0ZXJIYW5kbGUgPSBmYWlsQWZ0ZXIodGltZW91dCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICBwb3N0SlNPTih1cmwsIGJvZHksIGhlYWRlcnMsIGZ1bmN0aW9uc0luc3RhbmNlLmZldGNoSW1wbCwgZnVuY3Rpb25zSW5zdGFuY2UpLFxuICAgICAgICBmYWlsQWZ0ZXJIYW5kbGUucHJvbWlzZSxcbiAgICAgICAgZnVuY3Rpb25zSW5zdGFuY2UuY2FuY2VsQWxsUmVxdWVzdHNcbiAgICBdKTtcbiAgICAvLyBBbHdheXMgY2xlYXIgdGhlIGZhaWxBZnRlciB0aW1lb3V0XG4gICAgZmFpbEFmdGVySGFuZGxlLmNhbmNlbCgpO1xuICAgIC8vIElmIHNlcnZpY2Ugd2FzIGRlbGV0ZWQsIGludGVycnVwdGVkIHJlc3BvbnNlIHRocm93cyBhbiBlcnJvci5cbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgIHRocm93IG5ldyBGdW5jdGlvbnNFcnJvcignY2FuY2VsbGVkJywgJ0ZpcmViYXNlIEZ1bmN0aW9ucyBpbnN0YW5jZSB3YXMgZGVsZXRlZC4nKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIGFuIGVycm9yIHN0YXR1cywgcmVnYXJkbGVzcyBvZiBodHRwIHN0YXR1cy5cbiAgICBjb25zdCBlcnJvciA9IF9lcnJvckZvclJlc3BvbnNlKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UuanNvbik7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAoIXJlc3BvbnNlLmpzb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEZ1bmN0aW9uc0Vycm9yKCdpbnRlcm5hbCcsICdSZXNwb25zZSBpcyBub3QgdmFsaWQgSlNPTiBvYmplY3QuJyk7XG4gICAgfVxuICAgIGxldCByZXNwb25zZURhdGEgPSByZXNwb25zZS5qc29uLmRhdGE7XG4gICAgLy8gVE9ETyhrbGltdCk6IEZvciByaWdodCBub3csIGFsbG93IFwicmVzdWx0XCIgaW5zdGVhZCBvZiBcImRhdGFcIiwgZm9yXG4gICAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgaWYgKHR5cGVvZiByZXNwb25zZURhdGEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlLmpzb24ucmVzdWx0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlc3BvbnNlRGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gQ29uc2lkZXIgdGhlIHJlc3BvbnNlIG1hbGZvcm1lZC5cbiAgICAgICAgdGhyb3cgbmV3IEZ1bmN0aW9uc0Vycm9yKCdpbnRlcm5hbCcsICdSZXNwb25zZSBpcyBtaXNzaW5nIGRhdGEgZmllbGQuJyk7XG4gICAgfVxuICAgIC8vIERlY29kZSBhbnkgc3BlY2lhbCB0eXBlcywgc3VjaCBhcyBkYXRlcywgaW4gdGhlIHJldHVybmVkIGRhdGEuXG4gICAgY29uc3QgZGVjb2RlZERhdGEgPSBkZWNvZGUocmVzcG9uc2VEYXRhKTtcbiAgICByZXR1cm4geyBkYXRhOiBkZWNvZGVkRGF0YSB9O1xufVxuLyoqXG4gKiBDYWxscyBhIGNhbGxhYmxlIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5IGFuZCByZXR1cm5zIGEgc3RyZWFtaW5nIHJlc3VsdC5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjYWxsYWJsZSB0cmlnZ2VyLlxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gcGFzcyBhcyBwYXJhbXMgdG8gdGhlIGZ1bmN0aW9uLlxuICogQHBhcmFtIG9wdGlvbnMgU3RyZWFtaW5nIHJlcXVlc3Qgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gc3RyZWFtKGZ1bmN0aW9uc0luc3RhbmNlLCBuYW1lLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgY29uc3QgdXJsID0gZnVuY3Rpb25zSW5zdGFuY2UuX3VybChuYW1lKTtcbiAgICByZXR1cm4gc3RyZWFtQXRVUkwoZnVuY3Rpb25zSW5zdGFuY2UsIHVybCwgZGF0YSwgb3B0aW9ucyB8fCB7fSk7XG59XG4vKipcbiAqIENhbGxzIGEgY2FsbGFibGUgZnVuY3Rpb24gYXN5bmNocm9ub3VzbHkgYW5kIHJldHVybiBhIHN0cmVhbWluZyByZXN1bHQuXG4gKiBAcGFyYW0gdXJsIFRoZSB1cmwgb2YgdGhlIGNhbGxhYmxlIHRyaWdnZXIuXG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBwYXNzIGFzIHBhcmFtcyB0byB0aGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0gb3B0aW9ucyBTdHJlYW1pbmcgcmVxdWVzdCBvcHRpb25zLlxuICovXG5hc3luYyBmdW5jdGlvbiBzdHJlYW1BdFVSTChmdW5jdGlvbnNJbnN0YW5jZSwgdXJsLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgLy8gRW5jb2RlIGFueSBzcGVjaWFsIHR5cGVzLCBzdWNoIGFzIGRhdGVzLCBpbiB0aGUgaW5wdXQgZGF0YS5cbiAgICBkYXRhID0gZW5jb2RlKGRhdGEpO1xuICAgIGNvbnN0IGJvZHkgPSB7IGRhdGEgfTtcbiAgICAvL1xuICAgIC8vIEFkZCBhIGhlYWRlciBmb3IgdGhlIGF1dGhUb2tlbi5cbiAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgbWFrZUF1dGhIZWFkZXJzKGZ1bmN0aW9uc0luc3RhbmNlLCBvcHRpb25zKTtcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICBoZWFkZXJzWydBY2NlcHQnXSA9ICd0ZXh0L2V2ZW50LXN0cmVhbSc7XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgZnVuY3Rpb25zSW5zdGFuY2UuZmV0Y2hJbXBsKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBnZXRDcmVkZW50aWFscyhmdW5jdGlvbnNJbnN0YW5jZSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZ1bmN0aW9uc0Vycm9yKCdjYW5jZWxsZWQnLCAnUmVxdWVzdCB3YXMgY2FuY2VsbGVkLicpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBQcm9taXNlLnJlamVjdChlcnJvciksXG4gICAgICAgICAgICAgICAgc3RyZWFtOiB7XG4gICAgICAgICAgICAgICAgICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhbiB1bmhhbmRsZWQgZXJyb3Igb24gdGhlIGJhY2tlbmQsIG9yIGl0IGNvdWxkIGJlIGFcbiAgICAgICAgLy8gbmV0d29yayBlcnJvci4gVGhlcmUncyBubyB3YXkgdG8ga25vdywgc2luY2UgYW4gdW5oYW5kbGVkIGVycm9yIG9uIHRoZVxuICAgICAgICAvLyBiYWNrZW5kIHdpbGwgZmFpbCB0byBzZXQgdGhlIHByb3BlciBDT1JTIGhlYWRlciwgYW5kIHRodXMgd2lsbCBiZVxuICAgICAgICAvLyB0cmVhdGVkIGFzIGEgbmV0d29yayBlcnJvciBieSBmZXRjaC5cbiAgICAgICAgY29uc3QgZXJyb3IgPSBfZXJyb3JGb3JSZXNwb25zZSgwLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IFByb21pc2UucmVqZWN0KGVycm9yKSxcbiAgICAgICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhc3luYyBpdGVyYXRvclxuICAgICAgICAgICAgc3RyZWFtOiB7XG4gICAgICAgICAgICAgICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCByZXN1bHRSZXNvbHZlcjtcbiAgICBsZXQgcmVzdWx0UmVqZWN0ZXI7XG4gICAgY29uc3QgcmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVzdWx0UmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICByZXN1bHRSZWplY3RlciA9IHJlamVjdDtcbiAgICB9KTtcbiAgICBvcHRpb25zPy5zaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGdW5jdGlvbnNFcnJvcignY2FuY2VsbGVkJywgJ1JlcXVlc3Qgd2FzIGNhbmNlbGxlZC4nKTtcbiAgICAgICAgcmVzdWx0UmVqZWN0ZXIoZXJyb3IpO1xuICAgIH0pO1xuICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgY29uc3QgcnN0cmVhbSA9IGNyZWF0ZVJlc3BvbnNlU3RyZWFtKHJlYWRlciwgcmVzdWx0UmVzb2x2ZXIsIHJlc3VsdFJlamVjdGVyLCBvcHRpb25zPy5zaWduYWwpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0cmVhbToge1xuICAgICAgICAgICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBycmVhZGVyID0gcnN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBhc3luYyBuZXh0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcnJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdmFsdWUsIGRvbmUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcnJlYWRlci5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHJlc3VsdFByb21pc2VcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgUmVhZGFibGVTdHJlYW0gdGhhdCBwcm9jZXNzZXMgYSBzdHJlYW1pbmcgcmVzcG9uc2UgZnJvbSBhIHN0cmVhbWluZ1xuICogY2FsbGFibGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGRhdGEgaW4gc2VydmVyLXNlbnQgZXZlbnQgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSByZWFkZXIgVGhlIHVuZGVybHlpbmcgcmVhZGVyIHByb3ZpZGluZyByYXcgcmVzcG9uc2UgZGF0YVxuICogQHBhcmFtIHJlc3VsdFJlc29sdmVyIENhbGxiYWNrIHRvIHJlc29sdmUgdGhlIGZpbmFsIHJlc3VsdCB3aGVuIHJlY2VpdmVkXG4gKiBAcGFyYW0gcmVzdWx0UmVqZWN0ZXIgQ2FsbGJhY2sgdG8gcmVqZWN0IHdpdGggYW4gZXJyb3IgaWYgZW5jb3VudGVyZWRcbiAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgQWJvcnRTaWduYWwgdG8gY2FuY2VsIHRoZSBzdHJlYW0gcHJvY2Vzc2luZ1xuICogQHJldHVybnMgQSBSZWFkYWJsZVN0cmVhbSB0aGF0IGVtaXRzIGRlY29kZWQgbWVzc2FnZXMgZnJvbSB0aGUgcmVzcG9uc2VcbiAqXG4gKiBUaGUgcmV0dXJuZWQgUmVhZGFibGVTdHJlYW06XG4gKiAgIDEuIEVtaXRzIGluZGl2aWR1YWwgbWVzc2FnZXMgd2hlbiBcIm1lc3NhZ2VcIiBkYXRhIGlzIHJlY2VpdmVkXG4gKiAgIDIuIFJlc29sdmVzIHdpdGggdGhlIGZpbmFsIHJlc3VsdCB3aGVuIGEgXCJyZXN1bHRcIiBtZXNzYWdlIGlzIHJlY2VpdmVkXG4gKiAgIDMuIFJlamVjdHMgd2l0aCBhbiBlcnJvciBpZiBhbiBcImVycm9yXCIgbWVzc2FnZSBpcyByZWNlaXZlZFxuICovXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZVN0cmVhbShyZWFkZXIsIHJlc3VsdFJlc29sdmVyLCByZXN1bHRSZWplY3Rlciwgc2lnbmFsKSB7XG4gICAgY29uc3QgcHJvY2Vzc0xpbmUgPSAobGluZSwgY29udHJvbGxlcikgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2gocmVzcG9uc2VMaW5lUkUpO1xuICAgICAgICAvLyBpZ25vcmUgYWxsIG90aGVyIGxpbmVzIChuZXdsaW5lLCBjb21tZW50cywgZXRjLilcbiAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBtYXRjaFsxXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgIGlmICgncmVzdWx0JyBpbiBqc29uRGF0YSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFJlc29sdmVyKGRlY29kZShqc29uRGF0YS5yZXN1bHQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ21lc3NhZ2UnIGluIGpzb25EYXRhKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGRlY29kZShqc29uRGF0YS5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdlcnJvcicgaW4ganNvbkRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IF9lcnJvckZvclJlc3BvbnNlKDAsIGpzb25EYXRhKTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXN1bHRSZWplY3RlcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRnVuY3Rpb25zRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXN1bHRSZWplY3RlcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWdub3JlIG90aGVyIHBhcnNpbmcgZXJyb3JzXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUZXh0ID0gJyc7XG4gICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZ1bmN0aW9uc0Vycm9yKCdjYW5jZWxsZWQnLCAnUmVxdWVzdCB3YXMgY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRSZWplY3RlcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGV4dC50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzTGluZShjdXJyZW50VGV4dC50cmltKCksIGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZ1bmN0aW9uc0Vycm9yKCdjYW5jZWxsZWQnLCAnUmVxdWVzdCB3YXMgY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFJlamVjdGVyKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dCArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY3VycmVudFRleHQuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dCA9IGxpbmVzLnBvcCgpIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NMaW5lKGxpbmUudHJpbSgpLCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25zRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEZ1bmN0aW9uc0Vycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IF9lcnJvckZvclJlc3BvbnNlKDAsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKGZ1bmN0aW9uc0Vycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UmVqZWN0ZXIoZnVuY3Rpb25zRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCBuYW1lID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEzLjFcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IEFVVEhfSU5URVJOQUxfTkFNRSA9ICdhdXRoLWludGVybmFsJztcbmNvbnN0IEFQUF9DSEVDS19JTlRFUk5BTF9OQU1FID0gJ2FwcC1jaGVjay1pbnRlcm5hbCc7XG5jb25zdCBNRVNTQUdJTkdfSU5URVJOQUxfTkFNRSA9ICdtZXNzYWdpbmctaW50ZXJuYWwnO1xuZnVuY3Rpb24gcmVnaXN0ZXJGdW5jdGlvbnModmFyaWFudCkge1xuICAgIGNvbnN0IGZhY3RvcnkgPSAoY29udGFpbmVyLCB7IGluc3RhbmNlSWRlbnRpZmllcjogcmVnaW9uT3JDdXN0b21Eb21haW4gfSkgPT4ge1xuICAgICAgICAvLyBEZXBlbmRlbmNpZXNcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgY29uc3QgYXV0aFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKEFVVEhfSU5URVJOQUxfTkFNRSk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2luZ1Byb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKE1FU1NBR0lOR19JTlRFUk5BTF9OQU1FKTtcbiAgICAgICAgY29uc3QgYXBwQ2hlY2tQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcihBUFBfQ0hFQ0tfSU5URVJOQUxfTkFNRSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25zU2VydmljZShhcHAsIGF1dGhQcm92aWRlciwgbWVzc2FnaW5nUHJvdmlkZXIsIGFwcENoZWNrUHJvdmlkZXIsIHJlZ2lvbk9yQ3VzdG9tRG9tYWluKTtcbiAgICB9O1xuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KEZVTkNUSU9OU19UWVBFLCBmYWN0b3J5LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKS5zZXRNdWx0aXBsZUluc3RhbmNlcyh0cnVlKSk7XG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIHZhcmlhbnQpO1xuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbSwgY2pzLCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAyMCcpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEge0BsaW5rIEZ1bmN0aW9uc30gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBhcHAuXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB0byB1c2UuXG4gKiBAcGFyYW0gcmVnaW9uT3JDdXN0b21Eb21haW4gLSBvbmUgb2Y6XG4gKiAgIGEpIFRoZSByZWdpb24gdGhlIGNhbGxhYmxlIGZ1bmN0aW9ucyBhcmUgbG9jYXRlZCBpbiAoZXg6IHVzLWNlbnRyYWwxKVxuICogICBiKSBBIGN1c3RvbSBkb21haW4gaG9zdGluZyB0aGUgY2FsbGFibGUgZnVuY3Rpb25zIChleDogaHR0cHM6Ly9teWRvbWFpbi5jb20pXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGdldEZ1bmN0aW9ucyhhcHAgPSBnZXRBcHAoKSwgcmVnaW9uT3JDdXN0b21Eb21haW4gPSBERUZBVUxUX1JFR0lPTikge1xuICAgIC8vIERlcGVuZGVuY2llc1xuICAgIGNvbnN0IGZ1bmN0aW9uc1Byb3ZpZGVyID0gX2dldFByb3ZpZGVyKGdldE1vZHVsYXJJbnN0YW5jZShhcHApLCBGVU5DVElPTlNfVFlQRSk7XG4gICAgY29uc3QgZnVuY3Rpb25zSW5zdGFuY2UgPSBmdW5jdGlvbnNQcm92aWRlci5nZXRJbW1lZGlhdGUoe1xuICAgICAgICBpZGVudGlmaWVyOiByZWdpb25PckN1c3RvbURvbWFpblxuICAgIH0pO1xuICAgIGNvbnN0IGVtdWxhdG9yID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0KCdmdW5jdGlvbnMnKTtcbiAgICBpZiAoZW11bGF0b3IpIHtcbiAgICAgICAgY29ubmVjdEZ1bmN0aW9uc0VtdWxhdG9yKGZ1bmN0aW9uc0luc3RhbmNlLCAuLi5lbXVsYXRvcik7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbnNJbnN0YW5jZTtcbn1cbi8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRnVuY3Rpb25zIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IHRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnkgb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gaG9zdCAtIFRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KVxuICogQHBhcmFtIHBvcnQgLSBUaGUgZW11bGF0b3IgcG9ydCAoZXg6IDUwMDEpXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3RGdW5jdGlvbnNFbXVsYXRvcihmdW5jdGlvbnNJbnN0YW5jZSwgaG9zdCwgcG9ydCkge1xuICAgIGNvbm5lY3RGdW5jdGlvbnNFbXVsYXRvciQxKGdldE1vZHVsYXJJbnN0YW5jZShmdW5jdGlvbnNJbnN0YW5jZSksIGhvc3QsIHBvcnQpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBjYWxsYWJsZSBIVFRQUyB0cmlnZ2VyIHdpdGggdGhlIGdpdmVuIG5hbWUuXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0cmlnZ2VyLlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBodHRwc0NhbGxhYmxlKGZ1bmN0aW9uc0luc3RhbmNlLCBuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGh0dHBzQ2FsbGFibGUkMShnZXRNb2R1bGFySW5zdGFuY2UoZnVuY3Rpb25zSW5zdGFuY2UpLCBuYW1lLCBvcHRpb25zKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgY2FsbGFibGUgSFRUUFMgdHJpZ2dlciB3aXRoIHRoZSBzcGVjaWZpZWQgdXJsLlxuICogQHBhcmFtIHVybCAtIFRoZSB1cmwgb2YgdGhlIHRyaWdnZXIuXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGh0dHBzQ2FsbGFibGVGcm9tVVJMKGZ1bmN0aW9uc0luc3RhbmNlLCB1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gaHR0cHNDYWxsYWJsZUZyb21VUkwkMShnZXRNb2R1bGFySW5zdGFuY2UoZnVuY3Rpb25zSW5zdGFuY2UpLCB1cmwsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENsb3VkIEZ1bmN0aW9ucyBmb3IgRmlyZWJhc2VcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xucmVnaXN0ZXJGdW5jdGlvbnMoKTtcblxuZXhwb3J0IHsgRnVuY3Rpb25zRXJyb3IsIGNvbm5lY3RGdW5jdGlvbnNFbXVsYXRvciwgZ2V0RnVuY3Rpb25zLCBodHRwc0NhbGxhYmxlLCBodHRwc0NhbGxhYmxlRnJvbVVSTCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbIkxPTkdfVFlQRSIsIlVOU0lHTkVEX0xPTkdfVFlQRSIsIm1hcFZhbHVlcyIsIm8iLCJmIiwicmVzdWx0Iiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJlbmNvZGUiLCJkYXRhIiwiTnVtYmVyIiwidmFsdWVPZiIsImlzRmluaXRlIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwieCIsIkVycm9yIiwiZGVjb2RlIiwianNvbiIsInZhbHVlIiwiaXNOYU4iLCJGVU5DVElPTlNfVFlQRSIsImVycm9yQ29kZU1hcCIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJVTkFVVEhFTlRJQ0FURUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJJTlRFUk5BTCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiRnVuY3Rpb25zRXJyb3IiLCJjb25zdHJ1Y3RvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsInN1cGVyIiwidGhpcyIsInNldFByb3RvdHlwZU9mIiwiX2Vycm9yRm9yUmVzcG9uc2UiLCJzdGF0dXMiLCJib2R5SlNPTiIsImNvZGVGb3JIVFRQU3RhdHVzIiwiZGVzY3JpcHRpb24iLCJlcnJvckpTT04iLCJlcnJvciIsInVuZGVmaW5lZCIsImUiLCJDb250ZXh0UHJvdmlkZXIiLCJhcHAiLCJhdXRoUHJvdmlkZXIiLCJtZXNzYWdpbmdQcm92aWRlciIsImFwcENoZWNrUHJvdmlkZXIiLCJhdXRoIiwibWVzc2FnaW5nIiwiYXBwQ2hlY2siLCJzZXJ2ZXJBcHBBcHBDaGVja1Rva2VuIiwic2V0dGluZ3MiLCJhcHBDaGVja1Rva2VuIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9uYWwiLCJnZXQiLCJ0aGVuIiwiZ2V0QXV0aFRva2VuIiwidG9rZW4iLCJnZXRUb2tlbiIsImFjY2Vzc1Rva2VuIiwiZ2V0TWVzc2FnaW5nVG9rZW4iLCJzZWxmIiwiTm90aWZpY2F0aW9uIiwicGVybWlzc2lvbiIsImdldEFwcENoZWNrVG9rZW4iLCJsaW1pdGVkVXNlQXBwQ2hlY2tUb2tlbnMiLCJnZXRMaW1pdGVkVXNlVG9rZW4iLCJnZXRDb250ZXh0IiwiYXV0aFRva2VuIiwibWVzc2FnaW5nVG9rZW4iLCJERUZBVUxUX1JFR0lPTiIsInJlc3BvbnNlTGluZVJFIiwiRnVuY3Rpb25zU2VydmljZSIsInJlZ2lvbk9yQ3VzdG9tRG9tYWluIiwiZmV0Y2hJbXBsIiwiYXJncyIsImZldGNoIiwiZW11bGF0b3JPcmlnaW4iLCJjb250ZXh0UHJvdmlkZXIiLCJjYW5jZWxBbGxSZXF1ZXN0cyIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGVsZXRlU2VydmljZSIsInVybCIsIlVSTCIsImN1c3RvbURvbWFpbiIsIm9yaWdpbiIsInBhdGhuYW1lIiwicmVnaW9uIiwiX2RlbGV0ZSIsIl91cmwiLCJuYW1lIiwicHJvamVjdElkIiwib3B0aW9ucyIsImh0dHBzQ2FsbGFibGUkMSIsImZ1bmN0aW9uc0luc3RhbmNlIiwiY2FsbGFibGUiLCJhc3luYyIsImJvZHkiLCJoZWFkZXJzIiwibWFrZUF1dGhIZWFkZXJzIiwiZmFpbEFmdGVySGFuZGxlIiwibWlsbGlzIiwidGltZXIiLCJwcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJjYW5jZWwiLCJjbGVhclRpbWVvdXQiLCJmYWlsQWZ0ZXIiLCJ0aW1lb3V0IiwicmVzcG9uc2UiLCJyYWNlIiwicG9zdEpTT04iLCJyZXNwb25zZURhdGEiLCJjYWxsQXRVUkwiLCJzdHJlYW0iLCJyZXN1bHRSZXNvbHZlciIsInJlc3VsdFJlamVjdGVyIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsInNpZ25hbCIsImNyZWRlbnRpYWxzIiwiZ2V0Q3JlZGVudGlhbHMiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwibmV4dCIsInJlc3VsdFByb21pc2UiLCJhZGRFdmVudExpc3RlbmVyIiwicnN0cmVhbSIsInJlYWRlciIsInByb2Nlc3NMaW5lIiwibGluZSIsImNvbnRyb2xsZXIiLCJtYXRjaCIsImpzb25EYXRhIiwicGFyc2UiLCJlbnF1ZXVlIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImN1cnJlbnRUZXh0IiwicHVtcCIsImFib3J0ZWQiLCJkb25lIiwicmVhZCIsInRyaW0iLCJjbG9zZSIsImxpbmVzIiwic3BsaXQiLCJwb3AiLCJmdW5jdGlvbnNFcnJvciIsImNyZWF0ZVJlc3BvbnNlU3RyZWFtIiwiZ2V0UmVhZGVyIiwicnJlYWRlciIsInN0cmVhbUF0VVJMIiwiY29udGV4dCIsInZlcnNpb24iLCJnZXRGdW5jdGlvbnMiLCJpZGVudGlmaWVyIiwiZW11bGF0b3IiLCJob3N0IiwicG9ydCIsInVzZVNzbCIsImNvbm5lY3RGdW5jdGlvbnNFbXVsYXRvciQxIiwiY29ubmVjdEZ1bmN0aW9uc0VtdWxhdG9yIiwiaHR0cHNDYWxsYWJsZSIsImNvbnRhaW5lciIsImluc3RhbmNlSWRlbnRpZmllciIsImdldFByb3ZpZGVyIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJ2YXJpYW50Il0sInNvdXJjZVJvb3QiOiIifQ==